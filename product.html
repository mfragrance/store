<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>D√©tail du Parfum</title>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet" />
  <style>
    body { font-family:'Montserrat',sans-serif; margin:0; padding:20px; background:#fff; color:#333; }
    a { text-decoration:none; color:#555; display:inline-block; margin-bottom:30px; }
    a:hover { color:#e63946; }
    .container { max-width:1000px; margin:auto; display:flex; flex-wrap:wrap; gap:40px; }
    .product-img { flex:1 1 350px; text-align:center; }
    .product-img img { max-width:100%; border-radius:12px; box-shadow:0 4px 20px rgba(0,0,0,0.1); }
    .thumbnails { margin-top:15px; }
    .thumbnails img { width:60px; margin:5px; border-radius:8px; cursor:pointer; border:2px solid transparent; transition:border .2s; }
    .thumbnails img:hover { border-color:#e63946; }
    .product-details { flex:1 1 400px; }
    h1 { font-size:1.8rem; margin-bottom:10px; }
    .price { font-size:1.4rem; margin:10px 0; }
    .old-price { text-decoration:line-through; color:#999; margin-right:15px; }
    .new-price { color:#e63946; font-weight:bold; }
    .quantity { margin:20px 0; display:flex; align-items:center; gap:10px; }
    .quantity button { width:30px; height:30px; font-size:18px; font-weight:bold; background:#e63946; color:#fff; border:none; border-radius:6px; cursor:pointer; }
    .quantity input { width:50px; text-align:center; padding:5px; border:1px solid #ccc; border-radius:6px; }
    .btn { background:#e63946; color:#fff; padding:10px 20px; border:none; border-radius:8px; font-size:16px; cursor:pointer; transition:.3s; margin-top:10px; display:inline-block; text-align:center;}
    .btn:hover { background:#b02631; }
    details { margin-top:20px; background:#f8f8f8; padding:12px; border-radius:8px; }
    summary { cursor:pointer; font-weight:bold; color:#e63946; }
    @media(max-width:768px){ .container{flex-direction:column;align-items:center;} }
    /* WhatsApp fixed button */
    .whatsapp-float {
      position: fixed;
      width: 60px;
      height: 60px;
      bottom: 40px;
      right: 40px;
      background-color: #25d366;
      color: #FFF;
      border-radius: 50px;
      text-align: center;
      font-size: 30px;
      box-shadow: 2px 2px 3px #999;
      z-index: 100;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    .whatsapp-float img {
      width: 35px;
      height: 35px;
    }
  </style>
</head>
<body>

<a href="index.html">‚Üê Retour aux produits</a>

<div class="container">
  <div class="product-img">
    <img id="product-image" src="" alt="Produit" />
    <div id="thumbnails" class="thumbnails"></div>
  </div>
  <div class="product-details">
    <h1 id="product-name">Chargement...</h1>
    <div class="price">
      <span class="old-price" id="product-old-price"></span>
      <span class="new-price" id="product-new-price"></span>
    </div>
    <div class="quantity">
      <button onclick="updateQty(-1)">-</button>
      <input type="number" id="qty" value="1" min="1" />
      <button onclick="updateQty(1)">+</button>
    </div>
    <a href="#" id="whatsapp-link" class="btn" target="_blank" rel="noopener noreferrer">
      Ajouter au Panier
    </a>
    <details>
      <summary>Livraison</summary>
      <p>Livraison √† domicile dans les 48H partout au Maroc.</p>
    </details>
    <details>
      <summary>Politique de retour</summary>
      <p>Retour dans les trois jours et √©change dans les sept jours √† compter de la date d'achat.</p>
    </details>
  </div>
</div>

<!-- WhatsApp floating button -->
<a href="https://api.whatsapp.com/send/?phone=212723070966&text=Salam!%20Bghit%20nsewl%203la%20wa7d%20lparfum." 
   class="whatsapp-float" 
   target="_blank" 
   aria-label="Contact via WhatsApp">
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
</a>

<script>
  const products = {
    // Men fragrances (3 image in img folder)
    '9PM Afnan': { name: '9PM Afnan', folder: '9pmafnan', oldPrice: '550 MAD', newPrice: '470 MAD', type: 'men' },
    'Le Male Elixir': { name: 'Le Male Elixir', folder: 'elexir', oldPrice: '1600 MAD', newPrice: '1500 MAD', type: 'men' },
    'Xerjoff Erba Pura': { name: 'Xerjoff Erba Pura', folder: 'erbapurra', oldPrice: '2600 MAD', newPrice: '2450 MAD', type: 'men' },
    'Le Beau EDP': { name: 'Le Beau EDP', folder: 'lebeauedp', oldPrice: '1300 MAD', newPrice: '1150 MAD', type: 'men' },
    'Le Beau EDT': { name: 'Le Beau EDT', folder: 'lebeauedt', oldPrice: '950 MAD', newPrice: '850 MAD', type: 'men' },
    'Xerjoff Naxos': { name: 'Xerjoff Naxos', folder: 'naxos', oldPrice: '2300 MAD', newPrice: '2200 MAD', type: 'men' },
    '9PM Rebel': { name: '9PM Rebel', folder: 'ninepmrebel', oldPrice: '', newPrice: '550 MAD', type: 'men' },
    'Le Beau Paradise Garden 125ML': { name: 'Le Beau Paradise Garden 125ML', folder: 'paradise', oldPrice: '1200 MAD', newPrice: '990 MAD', type: 'men' },
    'Stronger With You': { name: 'Stronger With You', folder: 'stronger', oldPrice: '1000 MAD', newPrice: '1000 MAD', type: 'men' },
    'Ultra Male': { name: 'Ultra Male', folder: 'ultamale', oldPrice: '850 MAD', newPrice: '850 MAD', type: 'men' },
    'Uomo Valentino': { name: 'Uomo Valentino', folder: 'valentino', oldPrice: '1100 MAD', newPrice: '1000 MAD', type: 'men' },
    'Versace Eros': { name: 'Versace Eros', folder: 'versaccceeros', oldPrice: '720 MAD', newPrice: '720 MAD', type: 'men' },

    // Women fragrances (3 images in imgg folder)
    'Divine': { name: 'Divine', folder: 'divine', oldPrice: '900 MAD', newPrice: '850 MAD', type: 'women' },
    'Dolce GBN Light Blue': { name: 'Dolce GBN Light Blue', folder: 'dolcegbnlightblue', oldPrice: '750 MAD', newPrice: '700 MAD', type: 'women' },
    'Gabrielle Chanel Essence': { name: 'Gabrielle Chanel Essence', folder: 'gabriellechanelessence', oldPrice: '1100 MAD', newPrice: '1050 MAD', type: 'women' },
    'JPG Belle': { name: 'JPG Belle', folder: 'jpgbelle', oldPrice: '850 MAD', newPrice: '800 MAD', type: 'women' },
    'Scandal Gold EDP': { name: 'Scandal Gold EDP', folder: 'scandalgoldedp', oldPrice: '900 MAD', newPrice: '850 MAD', type: 'women' },
    'The One': { name: 'The One', folder: 'theone', oldPrice: '950 MAD', newPrice: '900 MAD', type: 'women' }
  };

  function updateQty(val) {
    const qty = document.getElementById('qty');
    let n = parseInt(qty.value) || 1;
    n = Math.max(1, n + val);
    qty.value = n;
  }

  function changeMainImage(src) {
    document.getElementById('product-image').src = src;
  }

  function loadProduct(prod) {
    if (!prod) {
      document.querySelector('.container').innerHTML = "<p style='font-size:1.2rem;'>üö´ Produit introuvable.</p>";
      return;
    }
    document.getElementById('product-name').textContent = prod.name;
    document.getElementById('product-old-price').textContent = prod.oldPrice;
    document.getElementById('product-new-price').textContent = prod.newPrice;

    let folderPath = '';
    let thumbCount = 1;

    if (prod.type === 'men') {
      folderPath = `img/${prod.folder}/`;
      thumbCount = 3; // 3 images
    } else if (prod.type === 'women') {
      folderPath = `imgg/${prod.folder}/`;
      thumbCount = 3; // 3 images
    }

    const mainImage = `${folderPath}1.jpg`;
    document.getElementById('product-image').src = mainImage;

    const thumbs = document.getElementById('thumbnails');
    thumbs.innerHTML = '';

    for (let i = 1; i <= thumbCount; i++) {
      const img = document.createElement('img');
      img.src = `${folderPath}${i}.jpg`;
      img.alt = `${prod.name} ${i}`;
      img.onclick = () => changeMainImage(img.src);
      thumbs.appendChild(img);
    }

    // Update WhatsApp link with product name and qty
    const whatsappLink = document.getElementById('whatsapp-link');
    whatsappLink.href = `https://api.whatsapp.com/send/?phone=212723070966&text=${encodeURIComponent(`Salam! Bghit nsewl 3la wa7d lparfum: ${prod.name}, quantit√©: 1`)}`;
    
    // Update qty listener to update WhatsApp link dynamically
    document.getElementById('qty').addEventListener('input', () => {
      let qtyVal = document.getElementById('qty').value || 1;
      if(qtyVal < 1) qtyVal = 1;
      whatsappLink.href = `https://api.whatsapp.com/send/?phone=212723070966&text=${encodeURIComponent(`Salam! Bghit nsewl 3la wa7d lparfum: ${prod.name}, quantit√©: ${qtyVal}`)}`;
    });
  }

  const nameParam = new URLSearchParams(location.search).get('name');
  const prod = Object.values(products).find(p => p.name === nameParam);
  loadProduct(prod);
</script>

</body>
</html>
